**Darkness Recon: Description and Usage**
Overview
Darkness Recon is an elite, all-in-one reconnaissance and scanning tool designed for cybersecurity professionals, bug bounty hunters, and penetration testers. Crafted by DarkLegende, this Bash script automates and optimizes the process of subdomain enumeration, live host detection, vulnerability scanning, and advanced reconnaissance for a given domain. It integrates over 40 cutting-edge tools to deliver unparalleled output, uncovering subdomains, endpoints, parameters, vulnerabilities, and hidden assets with maximum efficiency. The script is hyper-optimized for speed, reliability, and comprehensive coverage, featuring parallel execution, dynamic thread scaling, adaptive rate-limiting, and robust error handling. Results are organized in a structured directory with a glowing "Made by DarkLegende" signature in purple ANSI color.
Features

Subdomain Enumeration: Leverages 25+ tools (subfinder, assetfinder, amass, findomain, sublist3r, gobuster, dnsx, puredns, dnsrecon, altdns, shuffledns, haktrails, dnsgen, ctfr, knockpy, cero, bhedak, dnsenum, sublert, dnsmap, sdgo, etc.) for exhaustive subdomain discovery.
Live Subdomain Detection: Uses httpx to identify live hosts with rich metadata (status codes, content length, titles, technologies, etc.).
AI-Powered Recon: Employs bbot and spiderfoot for intelligent subdomain and asset discovery.
DNS Record Analysis: Extracts A, AAAA, CNAME, MX, NS, TXT, SRV, and PTR records with dnsx.
Cloud Asset Detection: Identifies AWS, Azure, and GCP assets using cloud_enum.
Technology Fingerprinting: Detects web technologies with whatweb.
Historical URL Fetching: Gathers URLs from waybackurls, waymore, and gauplus.
JavaScript File Analysis: Extracts and validates live JavaScript files with httpx.
Endpoint Discovery: Crawls for endpoints using katana, gospider, hakrawler, and paramspider.
API Endpoint Discovery: Uncovers API endpoints with apiscope (optional).
Parameter Analysis: Identifies parameters with unfurl and arjun (GET, POST, JSON methods).
Fuzzing: Performs deep fuzzing with ffuf using a custom wordlist generated by commonspeak2.
Directory Brute-Forcing: Discovers hidden directories/files with dirsearch (optional).
Git Repository Scanning: Detects exposed Git repositories with gitrob (optional).
Secret Scanning: Finds sensitive data in JavaScript files and endpoints with trufflehog (optional).
Pattern Matching: Identifies vulnerabilities (XSS, SQLi, LFI, RCE, etc.) with gf for 15+ patterns.
Subdomain Takeover Checks: Detects takeover opportunities with subjack and subzy.
Port Scanning: Conducts advanced port scans with nmap, masscan, and naabu (optional).
WAF Detection: Identifies Web Application Firewalls with wafw00f (optional).
Vulnerability Scanning: Scans for vulnerabilities with nuclei across all severities (optional).
SSL/TLS Analysis: Evaluates SSL/TLS configurations with sslyze (optional).
Visual Reconnaissance: Captures screenshots with aquatone and EyeWitness.
Dynamic Resolver Validation: Updates DNS resolvers with dnsvalidator for reliable resolution.
Rate-Limit Detection: Adapts scanning with ratelimitr to avoid blocks.
Optimized Execution: Features parallel processing, dynamic thread scaling (based on CPU cores), adaptive timeouts, retry logic, and deduplication for maximum efficiency.
Structured Output: Organizes results in a timestamped directory with detailed subdirectories and a summarized final_output.txt.

Requirements

System: Ubuntu/Debian-based Linux (tested on Ubuntu 22.04+).
Tools: Install all required tools as outlined in install_tools.md. Key tools include:
Subdomain enumeration: subfinder, assetfinder, amass, findomain, sublist3r, sdgo, etc.
Live host detection: httpx
Crawling: katana, gospider, hakrawler, paramspider
Scanning: nuclei, wafw00f, sslyze, ffuf, dirsearch
API/Git/Secrets: apiscope, gitrob, trufflehog
Other: dnsx, cloud_enum, whatweb, dnsvalidator, ratelimitr, anew, unfurl, jq, EyeWitness, aquatone


Dependencies: Ensure git, curl, python3, pip, go, nodejs, docker, and chromium-browser are installed.
Wordlists: Requires SecLists (/usr/share/seclists) for DNS and web content discovery.
Resolvers: Trusted DNS resolvers (/path/to/resolvers.txt) generated by dnsvalidator.
API Keys: Configure for amass, findomain, bbot, spiderfoot, cloud_enum for enhanced results.
Permissions: Some tools (masscan, nmap, trufflehog) require root or Docker group permissions.

Installation

Save the Script:

Save darkness_recon.sh to a directory (e.g., ~/recon/).

Make it executable:
chmod +x darkness_recon.sh




Install Tools:

Follow install_tools.md to install all required tools and dependencies.

Verify installations:
for tool in subfinder assetfinder amass findomain sublist3r gobuster httpx katana dnsx puredns dnsrecon altdns shuffledns haktrails dnsgen ctfr knockpy cero bhedak bbot spiderfoot gospider hakrawler paramspider gf ffuf wafw00f nuclei subjack subzy nmap masscan naabu dnsenum sublert dnsmap aquatone arjun sdgo cloud_enum dirsearch sslyze commonspeak2 apiscope whatweb gitrob dnsvalidator trufflehog ratelimitr anew unfurl jq EyeWitness; do
    command -v "$tool" >/dev/null && echo "$tool installed" || echo "$tool not installed"
done




Configure Paths:

Update the following variables in darkness_recon.sh:
RESOLVERS: Path to trusted resolvers (e.g., /path/to/resolvers.txt).
WORDLIST: Path to DNS wordlist (e.g., /usr/share/seclists/Discovery/DNS/subdomains-top1million-20000.txt).
WEB_WORDLIST: Path to web content wordlist (e.g., /usr/share/seclists/Discovery/Web-Content/raft-large-directories.txt).
API_WORDLIST: Path to API wordlist (e.g., /usr/share/seclists/Discovery/Web-Content/api/words.txt).
NMAP_SCRIPTS: Path to Nmap scripts (e.g., /usr/share/nmap/scripts).
amass-config.ini, subjack-fingerprints.json, bbot-config.yml: Paths to configuration files with API keys.




API Keys:

Configure API keys for amass, findomain, bbot, spiderfoot, cloud_enum as per install_tools.md.



Usage
Command Syntax
./darkness_recon.sh <domain> [--waf] [--nuclei] [--portscan] [--dirsearch] [--ssl] [--api] [--git] [--secrets]

Examples

Basic Recon:
./darkness_recon.sh example.com

Performs subdomain enumeration, live host detection, historical URL fetching, JavaScript file analysis, endpoint discovery, DNS record analysis, cloud asset detection, and more.

With Optional Scans:
./darkness_recon.sh example.com --waf --nuclei --portscan --dirsearch --ssl --api --git --secrets

Includes WAF detection, vulnerability scanning, port scanning, directory brute-forcing, SSL/TLS analysis, API endpoint discovery, Git repository scanning, and secret scanning.

Full Scan (all features):
./darkness_recon.sh example.com --waf --nuclei --portscan --dirsearch --ssl --api --git --secrets



Optional Flags

--waf: Enables WAF detection with wafw00f.
--nuclei: Runs vulnerability scanning with nuclei.
--portscan: Performs port scanning with nmap, masscan, and naabu.
--dirsearch: Conducts directory brute-forcing with dirsearch.
--ssl: Analyzes SSL/TLS configurations with sslyze.
--api: Discovers API endpoints with apiscope.
--git: Scans for Git repositories with gitrob.
--secrets: Scans for sensitive data with trufflehog.

Output Structure
Results are saved in a timestamped directory: <domain>/recon_<timestamp>/. Key subdirectories and files include:

subdomains/:
Tool-specific outputs (e.g., subfinder.txt, amass.txt).
all_subdomains.txt: Deduplicated list of all subdomains.


live/:
live_subdomains.txt: Live subdomains with metadata.
whatweb.txt: Technology fingerprinting results.


wayback/:
wayback_urls.txt: Historical URLs.


js/:
js_files.txt: All JavaScript files.
live_js_files.txt: Live JavaScript files.


urls/:
all_urls.txt: Combined URLs.
params.txt: URLs with parameters.
param_keys.txt: Extracted parameter keys.


params/:
arjun_params.txt: Parameters discovered by arjun.


endpoints/:
endpoints.txt: Crawled endpoints.


fuzz/:
ffuf_results.txt: Fuzzing results.
custom_wordlist.txt: Generated wordlist.


gf/:
Pattern-specific files (e.g., xss.txt, sqli.txt).


waf/:
waf_results.txt: WAF detection results (if enabled).


nuclei/:
nuclei_results.txt: Vulnerability scan results (if enabled).


ports/:
portscan_results.txt: Port scan results (if enabled).


dirsearch/:
dirsearch_results.txt: Directory brute-forcing results (if enabled).


ssl/:
sslyze_results.txt: SSL/TLS analysis results (if enabled).


api/:
apiscope_results.txt: API endpoint results (if enabled).


git/:
gitrob_results.txt: Git repository results (if enabled).


secrets/:
trufflehog_results.txt: Secret scanning results (if enabled).


dns/:
dns_records.txt: DNS record analysis.


cloud/:
cloud_aliases.txt: Cloud asset findings.


screenshots/:
aquatone/: Visual screenshots.
eyewitness/: Additional screenshots.


final_output.txt:
Summarized results with counts and key findings, signed "Made by DarkLegende".



Optimization Details

Parallel Execution: Runs tools simultaneously with & and wait.
Dynamic Threads: Scales threads based on CPU cores ($THREADS).
Rate-Limit Detection: Adapts scanning with ratelimitr ($RATE_LIMIT).
Timeouts: 15-30s for most tools, 8m for amass.
Retries: 2 retries ($MAX_RETRIES) for reliability.
Deduplication: Uses anew, sort -u, and regex to eliminate duplicates.
Optimized Flags:
subfinder: External sources, resolver retries.
dnsx: Comprehensive DNS record types, rate limiting.
nmap: Advanced scripts (dns-brute), high rate.
ffuf: Deep recursion, rate limiting.
nuclei: Excludes informational tags, cloud-focused.
sslyze: Full SSL/TLS protocol checks.
apiscope: API-specific wordlist, retry logic.



Notes

System Load: High thread counts (BASE_THREADS=150) and parallel execution may strain resources. Adjust BASE_THREADS or RATE_LIMIT if needed.
API Keys: Configure keys for amass, findomain, bbot, spiderfoot, cloud_enum to enhance results.
Permissions: Ensure sudo for masscan, nmap; Docker group for trufflehog.
Updates: Regularly update tools (go install ...@latest, pip install --upgrade, nuclei -update) and resolvers (dnsvalidator).
Troubleshooting: Refer to install_tools.md for setup issues. Check GitHub repositories for tool-specific problems.
Custom Paths: Verify paths for wordlists, resolvers, and configs in the script.
Chromium: Required for aquatone screenshots.
Ethical Use: Use only on domains you are authorized to test. Respect legal and ethical boundaries.

Example Workflow

Setup:

Install tools per install_tools.md.
Configure paths and API keys.
Save and chmod darkness_recon.sh.


Run:
./darkness_recon.sh target.com --waf --nuclei --portscan --dirsearch --ssl --api --git --secrets


Analyze:

Check final_output.txt for a summary.
Explore subdirectories for detailed results.
Review gf/ for potential vulnerabilities.
Inspect screenshots/ for visual insights.



Credits

Author: DarkLegende (muhammad-khalid-bin-walid )
Tools: Thanks to the open-source community for tools like subfinder, nuclei, httpx, and others.
Signature: All outputs are branded with a glowing "Made by DarkLegende" in purple ANSI color.

This document was generated on June 2, 2025, and is compatible with the latest version of darkness_recon.sh. For updates or issues, consult the script's repository or contact the author.
